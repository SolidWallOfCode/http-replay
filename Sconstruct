from parts import *

#enable smart linking
SetOptionDefault("LINKFLAGS", ['-Wl,--copy-dt-needed-entries', '-Wl,--as-needed'])

# mode = OPENSSL_USE_SYSTEM will have the part use the system version instead
openssl_git=None
if "OPENSSL_USE_SYSTEM" not in DefaultEnvironment()["mode"]:
    openssl_git=VcsGit(server="github.com", repository="openssl/openssl", protocol="https", tag="OpenSSL_1_1_1b")

Part("#lib/openssl.part",vcs_type=openssl_git)
Part("#lib/libyaml.part",vcs_type=VcsGit(server="github.com", repository="jbeder/yaml-cpp.git", tag="yaml-cpp-0.6.2"))
Part("swoc++/swoc++.part",vcs_type=VcsGit(server="github.com", repository="SolidWallOfCode/libswoc", tag="1.0.6"))
Part(
    "jemalloc",
    "#lib/jemalloc.part",
    vcs_type=VcsGit(server="github.com", repository="jemalloc/jemalloc.git", protocol="https", tag="5.1.0")
)

Part(
    "jansson",
    "#lib/jansson.part",
    vcs_type=VcsGit(server="github.com", repository="akheron/jansson", protocol="https", tag="v2.12")
)

Part(
    "libev",
    "#lib/libev.part",
    vcs_type=VcsGit(server="git.lighttpd.net", repository="libev", protocol="https", tag="rel-4.25")
)

Part(
    "libevent",
    "#lib/libevent.part",
    vcs_type=VcsGit(server="github.com", repository="libevent/libevent", protocol="https", tag="release-2.1.8-stable")
)

Part(
    "nghttp2",
    "#lib/nghttp2.part",
    vcs_type=VcsGit(server="github.com", repository="nghttp2/nghttp2", protocol="https", tag="v1.36.0")
)

Part("local/parts/http-replay.part")

